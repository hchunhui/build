From 37980f6659ce27b5515375f9bad203b2f7036f53 Mon Sep 17 00:00:00 2001
From: Chunhui He <hchunhui@mail.ustc.edu.cn>
Date: Sat, 13 Jul 2019 11:18:22 +0000
Subject: [PATCH 2/2] thirdparty PIC

---
 thirdparty.mk | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/thirdparty.mk b/thirdparty.mk
index 04c6f5a..bf9e167 100644
--- a/thirdparty.mk
+++ b/thirdparty.mk
@@ -25,6 +25,7 @@ clean-src:
 glog:
 	cd $(SRC_DIR)/glog; \
 	cmake . -Bcmake-build \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DBUILD_TESTING:BOOL=OFF \
 	-DWITH_GFLAGS:BOOL=OFF \
 	-DCMAKE_BUILD_TYPE:STRING="Release" \
@@ -34,6 +35,7 @@ glog:
 leveldb:
 	cd $(SRC_DIR)/leveldb; \
 	cmake . -Bbuild \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DLEVELDB_BUILD_BENCHMARKS:BOOL=OFF \
 	-DLEVELDB_BUILD_TESTS:BOOL=OFF \
 	-DCMAKE_BUILD_TYPE:STRING="Release" \
@@ -43,6 +45,7 @@ leveldb:
 marisa:
 	cd $(SRC_DIR)/marisa-trie; \
 	cmake $(SRC_DIR) -Bbuild \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DCMAKE_BUILD_TYPE:STRING="Release" \
 	-DCMAKE_INSTALL_PREFIX:PATH="$(THIRD_PARTY_DIR)" \
 	&& cmake --build build --target install
@@ -50,6 +53,7 @@ marisa:
 opencc:
 	cd $(SRC_DIR)/opencc; \
 	cmake . -Bbuild \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DBUILD_SHARED_LIBS:BOOL=OFF \
 	-DCMAKE_BUILD_TYPE:STRING="Release" \
 	-DCMAKE_INSTALL_PREFIX:PATH="$(THIRD_PARTY_DIR)" \
@@ -58,6 +62,7 @@ opencc:
 yaml-cpp:
 	cd $(SRC_DIR)/yaml-cpp; \
 	cmake . -Bbuild \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DYAML_CPP_BUILD_CONTRIB:BOOL=OFF \
 	-DYAML_CPP_BUILD_TESTS:BOOL=OFF \
 	-DYAML_CPP_BUILD_TOOLS:BOOL=OFF \
@@ -68,6 +73,7 @@ yaml-cpp:
 gtest:
 	cd $(SRC_DIR)/googletest; \
 	cmake . -Bbuild \
+	-DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON \
 	-DBUILD_GMOCK:BOOL=OFF \
 	-DCMAKE_BUILD_TYPE:STRING="Release" \
 	-DCMAKE_INSTALL_PREFIX:PATH="$(THIRD_PARTY_DIR)" \
-- 
2.20.1

